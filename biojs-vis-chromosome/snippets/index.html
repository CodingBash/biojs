<html>
<head>
	<script src="../biojs-vis-chromosome.min.js"></script>
	<link type="text/css" rel="stylesheet" href="../css/chromosome.css" />
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<link type="text/css" rel="stylesheet" href="../node_modules/area_selector/css/area_selector.css" />
	<link type="text/css" rel="stylesheet" href="../node_modules/area_selector/node_modules/jquery-ui/themes/base/jquery-ui.css" />
	
	<script>

	jQuery( document ).ready(function( $ ) {
		  // Handler for .ready() called.
		var chromosomes = ["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","X","Y"];
		inst=[];
		for (var i in chromosomes){
			var chr=chromosomes[i];
			$("#holder").append("<h3>Chromosome "+chr+"</h3><div id='holder_"+chr+"' style=''></div><br/>");
			//var instance1 = 

			var chromosome = new biojs.vis.chromosome();

			inst[i]= chromosome.init({
			     target: "holder_"+chr,
			     dasSource: "http://www.ensembl.org/das/Homo_sapiens.GRCh38.karyotype",
			     dasSegment: chr
			});
 			inst[i].on("onModelLoaded",function( objEvent ) {
				$("#holder_"+objEvent.model.id).data("size",1*objEvent.model.stop);
				adjustSizes(1*objEvent.model.stop);
			});  
		}
		var maxSize=0;
		var adjustSizes= function(size){
			if (maxSize<size)
				maxSize=size;
			for (var i in chromosomes){
				var chr=chromosomes[i];
				if($("#holder_"+chr).data("size")!=undefined){
					var size=$("#holder_"+chr).data("size");
					$("#holder_"+chr).width((size/maxSize)*100 +"%");
				}
			}
		}
	});
		
	</script>
</head>
<body>

<div id='holder'></div>
</body>
</html>
